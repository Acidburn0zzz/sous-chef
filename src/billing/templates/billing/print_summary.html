{% load i18n %}
{% load static %}
<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>{% trans 'Billing Summary' %} ({{billing.billing_period|date:"F Y"}})</title>
    <style>
      table {width: 100%;border-collapse:collapse}
      table th {text-align:left}
      table tr {border-bottom: 1px solid black}
      @media only screen {
        body {max-width:1024px}  /* for display */
      }
      @media only print {
        .no-print {display:none!important;visilibity:hidden!important}
      }
    </style>
  </head>
  <body>
    <h1 class="ui header">{% trans "Billing Summary" %}</h1>
    <h3>{{billing.billing_period|date:"F Y"}}</h3>
    <button onclick="javascript:window.print()" class="no-print">{% trans 'Print' %}</button>
    <table>
      <thead>
        <tr>
          <th>{% trans 'Client' %}</th>
          <th>{% trans 'Total Orders' %}</th>
          <th>{% trans 'Total Main Dishes' %}</th>
          <th>{% trans 'Total Amount' %}</th>
        </tr>
      </thead>
      <tfoot>
        <tr>
          <th colspan="3">{% trans "Total" %}</th>
          <th>${{ billing.total_amount }}</th>
        </tr>
      </tfoot>
      <tbody>
        {% for client, client_summary in billing_summary %}
        <tr>
          <td>{{client}}</td>
          <td>{{client_summary.total_orders}}</td>
          <td>
            {% with client_summary.total_main_dishes as tmd %}
            {% if tmd.R > 0 %}
            {{ tmd.R }} {% trans 'Regular' %}
            {% endif %}
            {% if tmd.R > 0 and tmd.L > 0 %}{% trans 'and' %}{% endif %}
            {% if tmd.L > 0 %}
            {{ tmd.L }} {% trans 'Large' %}
            {% endif %}
            {% endwith %}
          </td>
          <td>${{client_summary.total_amount}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>
